---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import SlidePreview from '../components/slides/SlidePreview.astro';
import { fade } from 'astro:transitions';
import DemoPreview from '@/components/demos/DemoPreview.astro';

const slides = await getCollection('slides');
slides.sort((a, b) => (a.data.order ?? 0) - (b.data.order ?? 0));
// console.log('slides', slides.length, slides);
---

<Layout>
  <h1 class="p-16 text-center text-4xl font-bold text-white">Blast Off With Astro! ðŸš€</h1>
  <div class="container mx-auto p-12">
    <div class="flex h-full flex-wrap items-center justify-center gap-12">
      {
        slides.map((slide, index) => {
          const slideLink = `/presentation/${index}`;
          return (
            <div transition:name={slideLink} transition:animate={fade({ duration: 1 })}>
              <button
                onclick={`window.location.href='${slideLink}'`}
                class="block cursor-pointer transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-[0_0_15px_rgba(255,255,255,0.3)]"
              >
                <SlidePreview slide={slide} />
              </button>
            </div>
          );
        })
      }
    </div>
  </div>
  <h2 class="pt-16 text-center text-4xl font-bold text-white">Demos</h2>
  <div class="container mx-auto p-12">
    <div class="flex h-full flex-wrap items-center justify-center gap-12">
      <DemoPreview title="React" link="/demos/react" />
      <DemoPreview title="Svelte" link="/demos/svelte" />
      <DemoPreview title="React and Svelte" link="/demos/reactandsvelte" />
    </div>
  </div>
</Layout>
